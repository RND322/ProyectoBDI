CREATE TABLE genero ( 
idgenero NUMBER PRIMARY KEY,
descripgenero VARCHAR2(15)
);

CREATE TABLE estadocivil( 
idestadocivil NUMBER PRIMARY KEY,
descripestadocivil VARCHAR2(15)
);


CREATE TABLE departamento ( 
iddepto NUMBER PRIMARY KEY,
nombredepto VARCHAR2(50)
);

CREATE TABLE sucursal( 
idsucursal NUMBER PRIMARY KEY,
nombresucursal VARCHAR2(100)
);

CREATE TABLE estadosolicitud( 
idestadosoli NUMBER PRIMARY KEY,
descripestadosoli VARCHAR2(50)
);

CREATE TABLE estadotarjeta( 
idestadotarjeta NUMBER PRIMARY KEY,
tipoestado VARCHAR2(30)
);

CREATE TABLE marca( 
idmarca NUMBER PRIMARY KEY,
nombremarca VARCHAR2(50)
);

CREATE TABLE moneda( 
idmoneda NUMBER PRIMARY KEY,
nombremoneda VARCHAR2(50)
);

CREATE TABLE ciudad( 
idciudad NUMBER GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
nombreciudad VARCHAR2(50),
iddepto NUMBER,
CONSTRAINT pk_ciudad PRIMARY KEY (idciudad),
CONSTRAINT iddeptoFK FOREIGN KEY(iddepto) REFERENCES departamento(iddepto)
);

CREATE TABLE empleado( 
idempleado VARCHAR2(15) PRIMARY KEY,
usuarioe VARCHAR2(15),
primernombre VARCHAR2(50),
primerapellido VARCHAR2(50),
cargo VARCHAR2(50),
idsucursal NUMBER,
CONSTRAINT idsucursalFK FOREIGN KEY(idsucursal) REFERENCES sucursal(idsucursal)
);

CREATE TABLE cliente( 
dni VARCHAR2(15) PRIMARY KEY,
usuarioc VARCHAR2(15),
primernombre VARCHAR2(50),
segundonombre VARCHAR2(50),
primerapellido VARCHAR2(50),
segundoapellido VARCHAR2(50),
correo VARCHAR2(100),
idestadocivil NUMBER,
idgenero NUMBER,
CONSTRAINT idestadocivilFK FOREIGN KEY(idestadoCivil) REFERENCES estadocivil(idestadocivil),
CONSTRAINT idgeneroFK FOREIGN KEY(idgenero) REFERENCES genero(idgenero)
);

CREATE TABLE direccion( 
iddireccion NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
idciudad NUMBER,
dni VARCHAR2(15),
CONSTRAINT pk_direccion PRIMARY KEY (iddireccion),
CONSTRAINT idciudaddirFK FOREIGN KEY(idciudad) REFERENCES ciudad(idciudad),
CONSTRAINT dnidireccionFK FOREIGN KEY(dni) REFERENCES cliente(dni)
);

CREATE TABLE datoslaborales ( 
iddatoslaborales NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
cargo VARCHAR2(50),
ingresomensual NUMBER(15,2),
nombrelugartrabajo VARCHAR2(100),
fechaingresotrabajo DATE,
dni VARCHAR2(15),
CONSTRAINT pk_datoslaborales PRIMARY KEY (iddatoslaborales),
CONSTRAINT dnilaboralesFK FOREIGN KEY(dni) REFERENCES cliente(dni)
);

CREATE TABLE telefono( 
idtelefono NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
telefonohogar VARCHAR2(15),
telefonocelular VARCHAR2(15),
dni VARCHAR2(15),
CONSTRAINT pk_telefono PRIMARY KEY (idtelefono),
CONSTRAINT dnitelefonoFK FOREIGN KEY(dni) REFERENCES cliente(dni)
);

CREATE TABLE tipoproducto( 
idtipoproducto NUMBER PRIMARY KEY,
nombreproducto VARCHAR2(50),
limitecredito NUMBER,
idmarca NUMBER,
CONSTRAINT idmarcaFK FOREIGN KEY(idmarca) REFERENCES marca(idmarca)
);


CREATE TABLE solicitud( 
idsolicitud NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
dni VARCHAR2(15),
idempleado VARCHAR2(15),
idtipoproducto NUMBER,
idestadosoli NUMBER,
CONSTRAINT pk_solicitud PRIMARY KEY (idsolicitud),
CONSTRAINT dnisoliFK FOREIGN KEY(dni) REFERENCES cliente(dni),
CONSTRAINT idempleadosoliFK FOREIGN KEY(idempleado) REFERENCES empleado(idempleado),
CONSTRAINT idtipoproducsoliFK FOREIGN KEY(idtipoproducto) REFERENCES tipoproducto(idtipoproducto),
CONSTRAINT idestadosoliFK FOREIGN KEY(idestadosoli) REFERENCES estadosolicitud(idestadosoli)
);

CREATE TABLE referenciaspersonales( 
idrefpersonales NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
primernombre VARCHAR2(50),
primerapellido VARCHAR2(50),
telresi VARCHAR2(15),
telcel VARCHAR2(15),
relacionsolicitante VARCHAR2(30),
idsolicitud NUMBER(20,0),
CONSTRAINT pk_referenciaspersonales PRIMARY KEY (idrefpersonales),
CONSTRAINT idsolicitudFK FOREIGN KEY(idsolicitud) REFERENCES solicitud(idsolicitud)
);

CREATE TABLE tarjeta( 
idtarjeta NUMBER PRIMARY KEY,
fechaapertura DATE,
fechavencimiento DATE,
fechacorte DATE,
pin NUMBER,
saldoactual NUMBER(15,2),
saldodisponible NUMBER(15,2),
pagominimo NUMBER(15,2),
fechalimitepago DATE,
tasainteresanual NUMBER(5,2),
idtipoproducto NUMBER,
dni VARCHAR2(15),
idestadotarjeta NUMBER,
CONSTRAINT idtipoproductarjeFK FOREIGN KEY(idtipoproducto) REFERENCES tipoproducto(idtipoproducto),
CONSTRAINT dnitarjetaFK FOREIGN KEY(dni) REFERENCES cliente(dni),
CONSTRAINT idestadotarjetaFK FOREIGN KEY(idestadotarjeta) REFERENCES estadotarjeta(idestadotarjeta)
);


CREATE TABLE mora( 
idmora NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
saldovencido NUMBER(15,2),
tasainteresmora NUMBER(3,2),
idtarjeta NUMBER,
CONSTRAINT pk_mora PRIMARY KEY (idmora),
CONSTRAINT idtarjetamoraFK FOREIGN KEY(idtarjeta) REFERENCES tarjeta(idtarjeta)
);

CREATE TABLE registrocuota(
idregistrocuota NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
idmora NUMBER,
idtarjeta NUMBER,
numerocuota NUMBER,
CONSTRAINT pk_registrocuota PRIMARY KEY (idregistrocuota),
CONSTRAINT idmoracuotaFK FOREIGN KEY (idmora) REFERENCES mora(idmora),
CONSTRAINT idtarjetacuotaFK FOREIGN KEY (idtarjeta) REFERENCES tarjeta(idtarjeta)
);


CREATE TABLE transaccion(
idtransac NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
noreferencia VARCHAR2(15),
fechatransaccion DATE,
concepto VARCHAR2(100),
monto NUMBER(15,2),
idmoneda NUMBER,
CONSTRAINT pk_transac PRIMARY KEY (idtransac),
CONSTRAINT idmonedatransacFK FOREIGN KEY (idmoneda) REFERENCES moneda(idmoneda)
);

CREATE TABLE historialtransaccion(
idhistorialtransaccion NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
idtarjeta NUMBER,
idtransac NUMBER,
CONSTRAINT pk_htrasaccion PRIMARY KEY (idhistorialtransaccion),
CONSTRAINT idtarjetahistorialFK FOREIGN KEY (idtarjeta) REFERENCES tarjeta(idtarjeta),
CONSTRAINT idtransachistorialFK FOREIGN KEY (idtransac) REFERENCES transaccion(idtransac)
);


CREATE TABLE estadocuenta(
idestadocuenta NUMBER(20,0) GENERATED BY DEFAULT AS IDENTITY
        MINVALUE 1
        MAXVALUE 9999999999999999999999999999
        INCREMENT BY 1
        START WITH 1
        CACHE 20
        NOORDER
        NOCYCLE
        NOT NULL ENABLE,
saldoanterior NUMBER(15,2),
compras NUMBER(15,2),
abonos NUMBER(15,2),
interesesadeudados NUMBER(15,2),
estadomora NUMBER(1),
idtarjeta NUMBER,
CONSTRAINT pk_estadocuenta PRIMARY KEY (idestadocuenta),
CONSTRAINT idtarjetaestadocuentaFK FOREIGN KEY (idtarjeta) REFERENCES tarjeta(idtarjeta)
);